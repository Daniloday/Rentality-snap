{"version":3,"file":"implementation.mjs","sourceRoot":"","sources":["../../../src/commands/eval/implementation.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAE,aAAa,EAAE,MAAM,EAAE,mCAAmC;;;AAG/E,OAAO,EAAE,YAAY,EAAE,yBAAqB;AAE5C;;;;;;;;GAQG;AACH,MAAM,CAAC,KAAK,UAAU,QAAQ,CAAC,IAAY;IACzC,IAAI,CAAC;QACH,OAAO,MAAM,UAAU,CAAC,IAAI,CAAC,CAAC;IAChC,CAAC;IAAC,OAAO,SAAS,EAAE,CAAC;QACnB,IAAI,SAAS,YAAY,aAAa,EAAE,CAAC;YACvC,MAAM,IAAI,YAAY,CACpB,qLAAqL,MAAM,CACzL,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,EAC5B,CAAC,CACF,EAAE,CACJ,CAAC;QACJ,CAAC;QAED,sEAAsE;QACtE,oBAAoB;QACpB,MAAM,SAAS,CAAC;IAClB,CAAC;AACH,CAAC","sourcesContent":["import { evalBundle, SnapEvalError, indent } from '@metamask/snaps-utils/node';\nimport { red } from 'chalk';\n\nimport { CommandError } from '../../errors';\n\n/**\n * Evaluate the given bundle in the SES environment. This is a wrapper around\n * {@link evalBundle} that throws a {@link CommandError} if the bundle cannot be\n * evaluated.\n *\n * @param path - The path to the bundle.\n * @returns The eval result.\n * @throws If the bundle cannot be evaluated.\n */\nexport async function evaluate(path: string) {\n  try {\n    return await evalBundle(path);\n  } catch (evalError) {\n    if (evalError instanceof SnapEvalError) {\n      throw new CommandError(\n        `Failed to evaluate snap bundle in SES. This is likely due to an incompatibility with the SES environment in your snap.\\nReceived the following error from the SES environment:\\n\\n${indent(\n          red(evalError.output.stderr),\n          2,\n        )}`,\n      );\n    }\n\n    // If the error is not a `SnapEvalError`, we don't know what it is, so\n    // we just throw it.\n    throw evalError;\n  }\n}\n"]}