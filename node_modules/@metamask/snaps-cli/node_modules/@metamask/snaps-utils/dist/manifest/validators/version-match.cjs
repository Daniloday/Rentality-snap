"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.versionMatch = void 0;
const types_1 = require("../../types.cjs");
/**
 * Check if the version in manifest is the same as in package.json.
 */
exports.versionMatch = {
    severity: 'error',
    semanticCheck(files, context) {
        const packageJsonVersion = files.packageJson.result.version;
        const manifestPackageVersion = files.manifest.result.version;
        if (packageJsonVersion !== manifestPackageVersion) {
            context.report(`"${types_1.NpmSnapFileNames.Manifest}" npm package version ("${manifestPackageVersion}") does not match the "${types_1.NpmSnapFileNames.PackageJson}" "version" field ("${packageJsonVersion}").`, ({ manifest }) => {
                manifest.version = packageJsonVersion;
                return { manifest };
            });
        }
    },
};
//# sourceMappingURL=version-match.cjs.map