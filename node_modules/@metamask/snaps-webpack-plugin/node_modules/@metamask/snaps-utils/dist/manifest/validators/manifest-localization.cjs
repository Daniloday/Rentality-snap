"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.manifestLocalization = void 0;
const snaps_sdk_1 = require("@metamask/snaps-sdk");
const localization_1 = require("../../localization.cjs");
/**
 * Verify whether the localization files localize the manifest correctly.
 */
exports.manifestLocalization = {
    severity: 'error',
    semanticCheck(files, context) {
        const manifest = files.manifest.result;
        const localizations = files.localizationFiles.map((file) => file.result);
        const locales = [
            'en', // The manifest must be able to be localized in English.
            ...localizations
                .map(({ locale }) => locale)
                .filter((locale) => locale !== 'en'),
        ];
        for (const locale of locales) {
            try {
                (0, localization_1.getLocalizedSnapManifest)(manifest, locale, localizations);
            }
            catch (error) {
                context.report(`Failed to localize Snap manifest: ${(0, snaps_sdk_1.getErrorMessage)(error)}`);
            }
        }
    },
};
//# sourceMappingURL=manifest-localization.cjs.map